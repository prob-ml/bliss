# This file uses GalSim to generate image data from catalogs of galaxy clusters
# Can be called directly from the command line using galsim galsim-des.yaml
# Inputs are catalogs (stored as .dat files) in the /catalogs/ directory
# Outputs are corresponding .fits files stored in the /galsim_des_data/ directory
# Catalog Columns:
#   0: RA
#   1: DEC
#   2: X
#   3: Y
#   4: FLUX_R
#   5: MAG_R
#   6: FLUX_G
#   7: MAG_G
#   8: FLUX_I
#   9: MAG_I
#   10: FLUX_Z
#   11: MAG_Z
#   12: TSIZE
#   13: FRACDEV
#   14: G1
#   15: G2

#psf :

 # type : Gaussian
  #sigma : 1
  #index_key : file_num

image :

  type : Scattered
  pixel_scale : 1.0
  xsize : 5000
  ysize : 5000
  stamp_size : 100

  random_seed : 8241573

  gsparams : {maximum_fft_size : 50000}

  noise:
    type: Gaussian
    variance:
      type: Random
      min: 0.002
      max: 0.006

stamp :

  draw_method :
    type : List
    items : [ fft, phot ]

  image_pos :
    type : XY
    x : { type: Catalog, col: 2 }
    y : { type: Catalog, col: 3 }

input :
  catalog :
    dir : data/catalogs
    file_name :
      type : FormattedStr
      format : "catalog_%03d.dat"
      items :
      - { type : Sequence, nitems : '@output.nfiles'}

---

gal :

  type : Exponential
  #Using a constant half light radius for now, since there were some issues in the TSIZE prior
  half_light_radius : 2.3
  flux : { type: Catalog, col: 4 } #using R band

  shear :
    type : G1G2
    g1 : { type: Catalog, col: 10 }
    g2 : { type: Catalog, col: 11 }

output :
  type : Fits
  dir : data/images
  file_name :
    type : FormattedStr
    format : "galsim-des-%03d-r.fits"
    items :
    - { type : Sequence, nitems: '@output.nfiles'}

  nfiles : 100

---

gal :

  type : Exponential
  #Using a constant half light radius for now, since there were some issues in the TSIZE prior
  half_light_radius : 2.3
  flux : { type: Catalog, col: 5 } #using G band

  shear :
    type : G1G2
    g1 : { type: Catalog, col: 10 }
    g2 : { type: Catalog, col: 11 }

output :
  type : Fits
  dir : data/images
  file_name :
    type : FormattedStr
    format : "galsim-des-%03d-g.fits"
    items :
    - { type : Sequence, nitems: '@output.nfiles'}

  nfiles : 100

---

gal :

  type : Exponential
  #Using a constant half light radius for now, since there were some issues in the TSIZE prior
  half_light_radius : 2.3
  flux : { type: Catalog, col: 6 } #using I band

  shear :
    type : G1G2
    g1 : { type: Catalog, col: 10 }
    g2 : { type: Catalog, col: 11 }

output :
  type : Fits
  dir : data/images
  file_name :
    type : FormattedStr
    format : "galsim-des-%03d-i.fits"
    items :
    - { type : Sequence, nitems: '@output.nfiles'}

  nfiles : 100

---

gal :

  type : Exponential
  #Using a constant half light radius for now, since there were some issues in the TSIZE prior
  half_light_radius : 2.3
  flux : { type: Catalog, col: 7 } #using Z band

  shear :
    type : G1G2
    g1 : { type: Catalog, col: 10 }
    g2 : { type: Catalog, col: 11 }

output :
  type : Fits
  dir : data/images
  file_name :
    type : FormattedStr
    format : "galsim-des-%03d-z.fits"
    items :
    - { type : Sequence, nitems: '@output.nfiles'}

  nfiles : 100
