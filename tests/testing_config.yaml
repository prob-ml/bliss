---
defaults:
    - ../bliss/conf@_here_: base_config
    - _self_

paths:
    dc2_pytest_data: ${paths.root}/case_studies/dc2/pytest_data/

prior:
    n_tiles_h: 4
    n_tiles_w: 4
    batch_size: 2
    prob_galaxy: 0.5

simulator:
    valid_n_batches: 1
    n_batches: 2
    num_workers: 0

cached_simulator:
    num_workers: 0
    splits: 0:34/34:67/67:100  # train/val/test splits as percent ranges
    batch_size: 1

surveys:
    sdss:
        fields:  # list of dictionaries, each with run, camcol, and list of fields
            - run: 94
              camcol: 1
              fields: [12]
        load_image_data: true
    dc2:
        data_dir: ${paths.dc2_pytest_data}
        split_result_folder: split_samples

#########################################

generate:
    n_image_files: 3
    n_batches_per_file: 1
    cached_data_path: null # use pytest tmpdir

train:
    seed: 42
    weight_save_path: null
    trainer:
        logger: null
        check_val_every_n_epoch: 1
        log_every_n_steps: 1
        accelerator: "cpu"
        devices: 1
        max_epochs: 1
    testing: true
    data_source: ${simulator}

predict:
    decals_frame: ${paths.decals}/336/3366m010/tractor-3366m010.fits
    device: "cpu"
